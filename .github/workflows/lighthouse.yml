name: "Run Lighthouse audit"
on:
  schedule:
  - cron: "0 0 * * *"
jobs:
  validate-508:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: Lighthouse CI Action
      uses: treosh/lighthouse-ci-action@9.3.0
      with:
        urls: |
          $SITE_URL/
          $SITE_URL/app/$FACILITY_ID
          $SITE_URL/app/queue/$FACILITY_ID
          $SITE_URL/app/results/$FACILITY_ID
          $SITE_URL/app/patients/$FACILITY_ID
          $SITE_URL/app/add-patient/$FACILITY_ID
          $SITE_URL/app/settings/$FACILITY_ID
          $SITE_URL/app/settings/facilities/$FACILITY_ID
          $SITE_URL/app/settings/add-facility/$FACILITY_ID
        uploadArtifacts: true
        configPath: ./lighthouserc.yml
        runs: 1
      env:
        SITE_URL: https://demo.simplereport.gov
        FACILITY_ID: ?facility=14fab3c1-070e-4e86-8ec7-4a1fc8e13477
