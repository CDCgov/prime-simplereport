{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "test.schema.json",
  "title": "Test / Lab Order",
  "description": "Information recorded for a test / lab order",
  "type": "object",
  "properties": {
    "testingLabSpecimenID": {
      "description": "(is this a unique test ID?)",
      "type": "string"
    },
    "orderTestDate": {
      "description": "",
      "type": "string",
      "format": "date-time"
    },
    "testResultCoded": {
      "description": "Test result - need to change to ENUM SNOMED-CT Qualitative Values:",
      "type": "string"
    },
    "specimenCollectionDateTime": {
      "description": "Test result date",
      "type": "string",
      "format": "date-time"
    },
    "orderingProviderID": {
      "description": "Ordering provider name; NPI",
      "type": "string"
    },
    "patientInfo": {
      "description": "time of test information for this patient",
      "type": "object",
      "properties": {
        "patientID": {
          "description": "Unique patient identifier",
          "type": "string"
        },
        "symptomatic": {
          "description": "symptomatic per CDC",
          "type": "string",
          "enum": ["YES", "NO", "UNK - Unknown"]
        }
      }
    },
    "facilityInfo": {
      "description": "facility information at the time of test",
      "type": "object",
      "properties": {
        "testingLabName": {
          "description": "Name of Testing Location",
          "type": "string"
        },
        "testingLabID": {
          "description": "CLIA Number",
          "type": "string"
        },
        "orderingProvider": {
          "description": "Ordering provider",
          "type": "object",
          "properties": {
            "lastName": {
              "description": "",
              "type": "string"
            },
            "firstName": {
              "description": "",
              "type": "string"
            },
            "street": {
              "description": "",
              "type": "string"
            },
            "zipCode": {
              "description": "",
              "type": "string"
            },
            "telephone": {
              "description": "",
              "type": "string",
              "pattern": "^(\\([0-9]{3}\\))?[0-9]{3}-[0-9]{4}$"
            }
          }
        },
        "orderedTestCode": {
          "description": "LOINC CODES ENUM TO BE ADDED",
          "type": "string"
        },
        "specimenSourceSiteCode": {
          "description": "snowmed-ct codes?",
          "type": "string"
        }
      }
    },
    "deviceID": {
      "description": "device identifier / device type - configurable dropdown?",
      "type": "string"
    },
    "testDate": {
      "description": "test result date generated by app",
      "type": "string",
      "format": "date-time"
    },
    "dateResultReleased": {
      "description": "test report date generated by app",
      "type": "string",
      "format": "date-time"
    }
  },
  "required": [
    "orderingProviderID",
    "facilityInfo.testingLabName",
    "facilityInfo.orderingProvider.lastName",
    "facilityInfo.orderingProvider.zipCode"
  ]
}
