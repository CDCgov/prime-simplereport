spring:
  profiles.include: no-security,no-okta-mgmt,no-okta-auth
  datasource:
    url: jdbc:postgresql://localhost:${test-db-port:5444}/simple_report
    hikari.minimum-idle: 2 # when a context isn't being used, it should not leave lots of connections lying around
  liquibase:
    user: simple_report_migrations
    password: migrations456
  jpa:
    properties:
      hibernate:
        default_schema: simple_report
management:
  endpoints:
    web:
      exposure:
        exclude: liquibase # this causes the liquibase connection pool to keep 10 connections active forever
        # Excluding it here will probably not work, so let's be clear (and grep-friendly): if you get
        # "org.postgresql.util.PSQLException: FATAL: remaining connection slots are reserved for non-replication superuser connections"
        # there is a decent chance that this actuator has been activated and is making liquibase eat your database connections.
logging:
  level:
    # Always have our own debug logging turned on in tests:
    gov.cdc.usds: DEBUG
    # Hibernate SQL query logging: basically the same as hibernate.show_sql but through slf4j
    org.hibernate.SQL: DEBUG
    # NOTE: un-comment any of the below to turn on something potentially interesting
    # Hibernate input and output value logging: SUPER VERBOSE
    # org.hibernate.type: TRACE
    # Other possibilities:
    # com.okta: DEBUG
    # org.springframework.security: DEBUG
simple-report:
  authorization:
    environment-name: "UNITTEST"
  sendgrid:
    enabled: false
    from-email: support@simplereport.gov
    account-request-recipient:
      - support@simplereport.gov
      - Protect-ServiceDesk@hhs.gov
    waitlist-recipient:
      - support@simplereport.gov
  demo-users:
    site-admin-emails:
      - ruby@example.com
      - notruby@example.com
    # These users are mapped to constants in TestUserIdentities. Do not modify casually!
    alternate-users:
      - identity: # STANDARD_USER
          username: bobbity@example.com
          first-name: Bobbity
          middle-name: Bob
          last-name: Bobberoo
        authorization: # USER_ORG_ROLES
          organization-external-id: DIS_ORG
          granted-roles: NO_ACCESS, USER
          facilities:
            - Injection Site
      - identity: # org admin
          username: admin@example.com
          first-name: Alice
          last-name: Andrews
        authorization: # ADMIN_ORG_ROLES
          organization-external-id: DIS_ORG
          granted-roles: NO_ACCESS, ADMIN
      - identity: # entry-only
          username: nobody@example.com
          first-name: Nemo
          last-name: Nixon
        authorization: # ENTRY_ONLY_ORG_ROLES
          organization-external-id: DIS_ORG
          granted-roles: NO_ACCESS, ENTRY_ONLY
          facilities:
            - Testing Site
      - identity: # standard user with all-facility access
          username: allfacilities@example.com
          first-name: Wendy
          middle-name: Wanda
          last-name: Williams
        authorization: # USER_ALL_FACILITIES_ORG_ROLES
          organization-external-id: DIS_ORG
          granted-roles: NO_ACCESS, USER, ALL_FACILITIES
      - identity: #SITE_ADMIN_USER
          username: ruby@example.com
          first-name: Ruby
          middle-name: Raven
          last-name: Reynolds
      - identity: #SITE_ADMIN_USER_WITH_ORG
          username: notruby@example.com
          first-name: Ruby
          middle-name: Raven
          last-name: Reynolds
        authorization: # USER_ALL_FACILITIES_ORG_ROLES
          organization-external-id: DIS_ORG
          granted-roles: NO_ACCESS, ADMIN
      - identity: # OUTSIDE_ORG_USER
          username: intruder@pirate.com
          first-name: Bootstrap
          middle-name: Bill
          last-name: Turner
        authorization:
          organization-external-id: DAT_ORG
          granted-roles: NO_ACCESS, USER
      - identity: # OUTSIDE_ORG_ADMIN
          username: captain@pirate.com
          first-name: Jack
          last-name: Sparrow
        authorization:
          organization-external-id: DAT_ORG
          granted-roles: NO_ACCESS, ADMIN
      - identity: # BROKEN
          username: castaway@pirate.com
          first-name: Candida
          last-name: Cannotlogin
simple-report-initialization:
  organizations:
    - org-name: Dis Organization
      external-id: DIS_ORG
      identity-verified: true
    - org-name: Dat Organization
      external-id: DAT_ORG
      identity-verified: true
  facilities:
    - facility-name: Injection Site
      clia-number: "000111222-3"
      address:
        street-1: 2797 N Cerrada de Beto
      organization-external-id: DIS_ORG
    - facility-name: Testing Site
      clia-number: "999888777-6"
      address:
        street-1: 1001 Rodeo Dr
        city: Los Angeles
        state: CA
        postal-code: 90000
      email: testingsite@disorg.com
      organization-external-id: DIS_ORG
    - facility-name: Uptown Clinic
      clia-number: "123456789-0"
      address:
        street-1: 1400 Lexington Ave
        city: New York
        state: NY
        postal-code: 10128
      organization-external-id: DAT_ORG
    - facility-name: Downtown Clinic
      clia-number: "987654321-0"
      address:
        street-1: 5 Bleecker St
        city: New York
        state: NY
        postal-code: 10010
      email: downtownclinic@dat.org
      organization-external-id: DAT_ORG
  provider:
    first-name: Fred
    last-name: Flintstone
    provider-id: PEBBLES
    telephone: (202) 555-1212
    address:
      street-1: 123 Main Street
      city: Oz
      state: KS
      postal-code: "12345"
  configured-device-types:
    - LumiraDX
    - Quidel Sofia 2
  specimen-types:
    - name: Swab of the Nose
      type-code: "445297001"
      collection-location-name: "NOSE"
      collection-location-code: "71836000"
  device-types:
    - name: Abbott IDNow
      manufacturer: Abbott
      model: ID Now
      loinc-code: "94534-5"
      swab-type: "445297001"
    - name: Abbott BinaxNow
      manufacturer: Abbott
      model: BinaxNOW COVID-19 Ag Card
      loinc-code: "94558-4"
      swab-type: "445297001"
    - name: Quidel Sofia 2
      manufacturer: Quidel
      model: Sofia 2 SARS Antigen FIA
      loinc-code: "95209-3"
      swab-type: "445297001"
    - name: BD Veritor
      manufacturer: Becton, Dickinson and Company (BD)
      model: "BD Veritor System for Rapid Detection of SARS-CoV-2*"
      loinc-code: "94558-4"
      swab-type: "445297001"
    - name: LumiraDX
      manufacturer: LumiraDx UK Ltd.
      model: LumiraDx SARS-CoV-2 Ag Test*
      loinc-code: "95209-3"
      swab-type: "445297001"
  patient-registration-links:
    - patient-registration-link: dis-org
      organization-external-id: DIS_ORG
