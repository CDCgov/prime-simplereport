ci:
  collect:
    numberOfRuns: 1
    startServerCommand: sh ./lighthouse.sh
    startServerReadyPattern: 'BUILD SUCCESSFUL'
    startServerReadyTimeout: 300000
    isSinglePageApplication: true
    url: https://localhost.simplereport.gov/app
    settings:
      chromeFlags:
        - "--ignore-certificate-errors"
      preset: "desktop"
  upload:
    target: filesystem
    outputDir: ./lighthouse
    githubToken: ${{ secrets.GITHUB_TOKEN }}
  assert:
    assertions:
      categories:performance: [warn, {minScore: 0.8}]
      categories:accessibility: [error, {minScore: 1}]